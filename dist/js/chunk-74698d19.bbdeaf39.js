(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74698d19"],{"13ba":function(t,e,s){"use strict";var i=s("e101"),n=s.n(i);n.a},"190b":function(t,e,s){s("149f")&&"g"!=/./g.flags&&s("064e").f(RegExp.prototype,"flags",{configurable:!0,get:s("f1fe")})},2326:function(t,e,s){},"292f":function(t,e,s){"use strict";var i=s("fa11"),n=s.n(i);n.a},"2b45":function(t,e,s){"use strict";s("190b");var i=s("69b3"),n=s("f1fe"),o=s("149f"),a="toString",r=/./[a],c=function(t){s("bf16")(RegExp.prototype,a,t,!0)};s("238a")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)})):r.name!=a&&c((function(){return r.call(this)}))},"2bdd":function(t,e,s){"use strict";var i=s("c353"),n=s.n(i);n.a},3930:function(t,e,s){"use strict";var i=s("95a4"),n=s.n(i);n.a},"40df":function(t,e,s){"use strict";var i=s("88ff"),n=s.n(i);n.a},"4a60":function(t,e,s){},"4b73":function(t,e,s){},"51a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ebook",staticClass:"ebook"},[s("ebook-header"),s("ebook-title"),s("ebook-reader"),s("ebook-menu"),s("ebook-bookmark"),s("ebook-footer")],1)},n=[],o=s("5158"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-down"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[s("div",{staticClass:"left"},[s("span",{staticClass:"icon-back",on:{click:t.back}})]),s("div",{staticClass:"right"},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-shelf",on:{click:t.shelf}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-cart"})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-more"})])])])])},r=[],c=s("ac0d"),l={mixins:[c["a"]],methods:{back:function(){this.$router.go(-1)},shelf:function(){console.log("go shelf"),this.$router.push("/store/shelf")}}},u=l,d=(s("40df"),s("4023")),h=Object(d["a"])(u,a,r,!1,null,"28c5c54a",null),f=h.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-menu",on:{click:function(e){return t.showSetting(3)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-progress",on:{click:function(e){return t.showSetting(2)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-bright",on:{click:function(e){return t.showSetting(1)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])])]),s("ebook-setting-font"),s("ebook-setting-font-popup"),s("ebook-setting-theme"),s("ebook-setting-progess"),s("ebook-slide")],1)},m=[],b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"popup-slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"ebook-popup-list"},[s("div",{staticClass:"ebook-popup-title"},[s("div",{staticClass:"ebook-popup-title-icon",on:{click:t.hide}},[s("span",{staticClass:"icon-down2"})]),s("span",{staticClass:"ebook-popup-title-text"},[t._v(t._s(t.$t("book.selectFont")))])]),s("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamilyList,(function(e,i){return s("div",{key:i,staticClass:"ebook-popup-item"},[s("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)},on:{click:function(s){return t.setFontFamily(e.font)}}},[t._v(t._s(e.font))]),t.isSelected(e)?s("div",{staticClass:"ebook-popup-item-check"},[s("span",{staticClass:"icon-check"})]):t._e()])})),0)])])},v=[],k=s("5de6"),g=s("5657"),C={data:function(){return{fontFamilyList:k["a"]}},mixins:[c["a"]],methods:{hide:function(){this.setFontFamilyVisible(!1)},isSelected:function(t){return this.defaultFontFamily===t.font},setFontFamily:function(t){this.setDefaultFontFamily(t),Object(g["n"])(this.fileName,t),"Default"===t?this.currentBook.rendition.themes.font("Times New Roman"):this.currentBook.rendition.themes.font(t)}}},w=C,x=(s("2bdd"),Object(d["a"])(w,b,v,!1,null,"09dd64ee",null)),_=x.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-font-size"},[s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),s("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,i){return s("div",{key:i,staticClass:"select-wrapper",on:{click:function(s){return t.setFontSize(e.fontSize)}}},[s("div",{staticClass:"line"}),s("div",{staticClass:"point-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[s("div",{staticClass:"small-point"})])]),s("div",{staticClass:"line"})])})),0),s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])]),s("div",{staticClass:"setting-font-family",on:{click:t.showFontFamilyPopup}},[s("div",{staticClass:"setting-font-family-text-wrapper"},[s("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),s("div",{staticClass:"setting-font-family-icon-wrapper"},[s("span",{staticClass:"icon-forward"})])])])])},S=[],$={mixins:[c["a"]],data:function(){return{fontSizeList:k["b"]}},methods:{setFontSize:function(t){this.setDefaultFontSize(t),Object(g["o"])(this.fileName,t),this.currentBook.rendition.themes.fontSize(t+"px")},showFontFamilyPopup:function(){this.setFontFamilyVisible(!0)}}},T=$,F=(s("3930"),Object(d["a"])(T,y,S,!1,null,"1a6df8a2",null)),O=F.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,i){return s("div",{key:i,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(i)}}},[s("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),s("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(t._s(e.alias))])])})),0)])])},j=[],E=(s("cc57"),{mixins:[c["a"]],methods:{setTheme:function(t){var e=this,s=this.themeList[t];this.setDefaultTheme(s.name).then((function(){e.currentBook.rendition.themes.select(e.defaultTheme),e.initGlobalStyle()})),Object(g["s"])(this.fileName,s.name)}}}),B=E,N=(s("6683"),Object(d["a"])(B,V,j,!1,null,"09b42a01",null)),P=N.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-progress"},[s("div",{staticClass:"read-time-wrapper"},[s("span",{staticClass:"read-time-text"},[t._v(t._s(t.getReadText()))]),s("span",{staticClass:"icon-forward"})]),s("div",{staticClass:"progress-wrapper"},[s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[s("span",{staticClass:"icon-back"})]),s("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[s("span",{staticClass:"icon-forward"})])]),s("div",{staticClass:"text-wrapper"},[s("span",{staticClass:"progress-section-text"},[t._v(t._s(t.getSectionName))]),s("span",[t._v(t._s(t.bookAvailable?t.progress+"%":"加载中..."))])])])])])},z=[],A={mixins:[c["a"]],methods:{onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress(),e.updateProgressBackground()}))},onProgressInput:function(t){var e=this;this.setProgress(t).then((function(){e.updateProgressBackground()}))},displayProgress:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then((function(){t.displaySection()}))},nextSection:function(){var t=this;this.section<this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then((function(){t.displaySection()}))},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)},updateProgressBackground:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")}},updated:function(){this.updateProgressBackground()}},W=A,I=(s("13ba"),Object(d["a"])(W,L,z,!1,null,"5e29cd2e",null)),D=I.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&3===t.settingVisible,expression:"menuVisible && settingVisible === 3"}],staticClass:"slide-content-wrapper"},[s("transition",{attrs:{name:"slide-right"}},[3===t.settingVisible?s("div",{staticClass:"content"},[t.bookAvailable?s("div",{staticClass:"content-page-wrapper"},[s("div",{staticClass:"content-page"},[s(1===t.currentTab?t.content:t.bookmark,{tag:"component"})],1),s("div",{staticClass:"content-page-tab"},[s("div",{staticClass:"content-page-tab-item",class:{selected:1===t.currentTab},on:{click:function(e){return t.selectTab(1)}}},[t._v(t._s(t.$t("book.navigation")))]),s("div",{staticClass:"content-page-tab-item",class:{selected:2===t.currentTab},on:{click:function(e){return t.selectTab(2)}}},[t._v(t._s(t.$t("book.bookmark")))])])]):s("div",{staticClass:"content-empty"},[s("ebook-loading")],1)]):t._e()]),s("div",{staticClass:"content-bg",on:{click:function(e){return t.hideTitleAndMenu()}}})],1)])},M=[],H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-contents"},[s("div",{staticClass:"slide-contents-search-wrapper"},[s("div",{staticClass:"slide-contents-search-input-wrapper"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.search()},click:t.showSearchPage,input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?s("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v(t._s(t.$t("book.cancel")))]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[s("div",{staticClass:"slide-contents-book-img-wrapper"},[s("img",{staticClass:"slide-contents-book-img",attrs:{src:t.cover}})]),s("div",{staticClass:"slide-contents-book-info-wrapper"},[s("div",{staticClass:"slide-contents-book-title"},[s("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata.title))])]),s("div",{staticClass:"slide-contents-book-author"},[s("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata.creator))])])]),s("div",{staticClass:"slide-contents-book-progress-wrapper"},[s("div",{staticClass:"slide-contents-book-progress"},[s("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))]),s("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))])]),s("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadText()))])])]),s("scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],ref:"scroll",staticClass:"slide-contents-list",attrs:{top:156,bottom:48}},t._l(t.navigation,(function(e,i){return s("div",{key:i,staticClass:"slide-contents-item"},[s("span",{staticClass:"slide-contents-item-label",class:{selected:t.section===i},style:t.contentItemStyle(e),on:{click:function(s){return t.displayContent(e.href)}}},[t._v(t._s(e.label))]),s("span",{staticClass:"slide-contents-item-page"},[t._v(t._s(e.page))])])})),0),s("scroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,(function(e,i){return s("div",{key:i,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(s){return t.displayContent(e.cfi,!0)}}},[t._v("\n    "+t._s(e.excerpt)+"\n    ")])})),0)],1)},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slide-contents-search-icon"},[s("span",{staticClass:"icon-search"})])}],Y=(s("f548"),s("e697"),s("6d57"),s("06a2"),s("6701")),J=s("fa7d"),G={mixins:[c["a"]],components:{Scroll:Y["a"]},data:function(){return{searchVisible:!1,searchList:null,searchText:""}},methods:{showSearchPage:function(){this.searchVisible=!0},hideSearchPage:function(){this.searchVisible=!1,this.searchText="",this.searchList=null},contentItemStyle:function(t){return{marginLeft:"".concat(15*Object(J["a"])(t.level),"rem")}},displayContent:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.display(t,(function(){e.hideTitleAndMenu(),s&&e.currentBook.rendition.annotations.highlight(t)}))},doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map((function(s){return s.load(e.currentBook.load.bind(e.currentBook)).then(s.find.bind(s,t)).finally(s.unload.bind(s))}))).then((function(t){return Promise.resolve([].concat.apply([],t))}))},search:function(){var t=this;this.searchText&&this.searchText.length>0&&this.doSearch(this.searchText).then((function(e){t.searchList=e,t.searchList.map((function(e){return e.excerpt=e.excerpt=e.excerpt.replace(t.searchText,'<span class="content-search-text">'.concat(t.searchText,"</span>")),e}))}))}},mounted:function(){var t=this;this.doSearch("added").then((function(e){t.searchList=e}))}},q=G,Q=(s("8585"),Object(d["a"])(q,H,K,!1,null,"160d6694",null)),U=Q.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-loading"},[s("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,(function(e,i){return s("div",{key:i,staticClass:"ebook-loading-item"},t._l(e,(function(t,e){return s("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[s("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),s("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])})),0)})),s("div",{staticClass:"ebook-loading-center"})],2)])},Z=[],tt={data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},mounted:function(){var t=this;this.task=setInterval((function(){t.$refs.mask.forEach((function(e,s){var i=t.$refs.mask[s],n=t.$refs.line[s],o=t.maskWidth[s],a=t.lineWidth[s];if(0===s)t.add&&o.value<16?(o.value++,a.value--):!t.add&&a.value<16&&(o.value--,a.value++);else if(t.add&&o.value<16){var r=t.maskWidth[s-1];r.value>=8&&(o.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[s-1];c.value>=8&&(o.value--,a.value++)}i.style.width="".concat(Object(J["a"])(o.value),"rem"),i.style.flex="0 0 ".concat(Object(J["a"])(o.value),"rem"),n.style.width="".concat(Object(J["a"])(a.value),"rem"),n.style.flex="0 0 ".concat(Object(J["a"])(a.value),"rem"),s===t.maskWidth.length-1&&(t.add?16===o.value&&(t.end=!0):0===o.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)}))}),20)}},et=tt,st=(s("a30a"),Object(d["a"])(et,X,Z,!1,null,"31d1c14b",null)),it=st.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-bookmark"},[s("div",{staticClass:"slide-bookmark-title"},[t._v(t._s(t.$t("book.bookmark"))+" · "+t._s(t.bookmark?t.bookmark.length:0))]),s("scroll",{staticClass:"slide-bookmark-list",attrs:{top:48,bottom:48}},t._l(t.bookmark,(function(e,i){return s("div",{key:i,staticClass:"slide-bookmark-item",on:{click:function(s){return t.displayBookmark(e.cfi)}}},[s("div",{staticClass:"slide-bookmark-item-icon"},[s("div",{staticClass:"icon-bookmark"})]),s("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])})),0)],1)},ot=[],at={mixins:[c["a"]],components:{Scroll:Y["a"]},data:function(){return{bookmark:null}},methods:{displayBookmark:function(t){var e=this;this.display(t,(function(){e.hideTitleAndMenu()}))}},mounted:function(){this.bookmark=Object(g["c"])(this.fileName)}},rt=at,ct=(s("e295"),Object(d["a"])(rt,nt,ot,!1,null,"6b87f8bc",null)),lt=ct.exports,ut={mixins:[c["a"]],components:{EbookLoading:it},data:function(){return{currentTab:1,content:U,bookmark:lt}},methods:{selectTab:function(t){this.currentTab=t}}},dt=ut,ht=(s("8060"),Object(d["a"])(dt,R,M,!1,null,"765bb3d6",null)),ft=ht.exports,pt={components:{EbookSettingFont:O,EbookSettingFontPopup:_,EbookSettingTheme:P,EbookSettingProgess:D,EbookSlide:ft},mixins:[c["a"]],methods:{showSetting:function(t){this.setSettingVisible(t)}}},mt=pt,bt=(s("794d"),Object(d["a"])(mt,p,m,!1,null,"2378b99c",null)),vt=bt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"ebook-bookmark"},[s("div",{staticClass:"ebook-bookmark-text-wrapper"},[s("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[s("span",{staticClass:"icon-down"})]),s("div",{staticClass:"ebook-bookmark-text"},[t._v(t._s(t.text))])]),s("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.isFiexed?t.fixedStyle:{}},[s("bookmark",{attrs:{color:t.color,width:15,height:35}})],1)])},gt=[],Ct=(s("2b45"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"bookmark",style:t.style})}),wt=[],xt=(s("163d"),{props:{width:Number,height:Number,color:String},computed:{style:function(){return this.color?{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}:{}}},methods:{refresh:function(){this.height&&this.width&&(this.$refs.bookmark.style.borderWidth="".concat(Object(J["a"])(this.height-5),"rem ").concat(Object(J["a"])(this.width/2),"rem ").concat(Object(J["a"])(5),"rem ").concat(Object(J["a"])(this.width/2),"rem"))}},mounted:function(){this.refresh()}}),_t=xt,yt=(s("b156"),Object(d["a"])(_t,Ct,wt,!1,null,"b65749c4",null)),St=yt.exports,$t="#FF0000",Tt="#fff",Ft={mixins:[c["a"]],components:{bookmark:St},computed:{height:function(){return Object(J["b"])(35)},threshold:function(){return Object(J["b"])(55)},fixedStyle:function(){return{position:"fixed",top:0,right:"".concat((window.innerWidth-this.$refs.bookmark.clientWidth)/2,"px")}}},watch:{offsetY:function(t){!this.bookAvailable||this.menuVisible||this.settingVisible>=0||(t>=this.height&&t<=this.threshold?this.beforeThreshold(t):t>=this.threshold?this.afterThreshold(t):t>0&&t<this.height?this.beforeHeight():0===t&&this.restore())},isBookmark:function(t){this.isFiexed=t,this.color=t?$t:Tt}},data:function(){return{text:"",color:Tt,isFiexed:!1}},methods:{beforeHeight:function(){this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=$t,this.isFiexed=!0):(this.text=this.$t("book.pulldownAddMark"),this.color=Tt,this.isFiexed=!1)},beforeThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.beforeHeight();var e=this.$refs.iconDown;"rotate(180deg)"===e.style.transform&&(e.style.transform="rotate(0deg)")},afterThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=Tt,this.isFiexed=!1):(this.text=this.$t("book.releaseAddMark"),this.color=$t,this.isFiexed=!0);var e=this.$refs.iconDown;""!==e.style.transform&&"rotate(0deg)"!==e.style.transform||(e.style.transform="rotate(180deg)")},restore:function(){var t=this;setTimeout((function(){t.$refs.bookmark.style.top="".concat(-t.height,"px"),t.$refs.iconDown.style.transform="rotate(0deg)"}),200),this.isFiexed?(this.setIsBookmark(!0),this.addBookmark()):(this.setIsBookmark(!1),this.removeBookmark())},addBookmark:function(){var t=this;this.bookmark=Object(g["c"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),s=e.start.cfi.replace(/!.*/,""),i=e.start.cfi.replace(/.*!/,"").replace(/\)$/,""),n=e.end.cfi.replace(/.*!/,"").replace(/\)$/,""),o="".concat(s,"!,").concat(i,",").concat(n,")");this.currentBook.getRange(o).then((function(s){var i=s.toString().replace(/\s\s/g,"");t.bookmark.push({cfi:e.start.cfi,text:i}),Object(g["m"])(t.fileName,t.bookmark)}))},removeBookmark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;this.bookmark=Object(g["c"])(this.fileName),this.bookmark&&(Object(g["m"])(this.fileName,this.bookmark.filter((function(t){return t.cfi!==e}))),this.setIsBookmark(!1))}}},Ot=Ft,Vt=(s("8f8f"),Object(d["a"])(Ot,kt,gt,!1,null,"149af002",null)),jt=Vt.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-header"},[s("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},Bt=[],Nt={mixins:[c["a"]]},Pt=Nt,Lt=(s("292f"),Object(d["a"])(Pt,Et,Bt,!1,null,"062562c4",null)),zt=Lt.exports,At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-footer"},[s("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.paginate))])])},Wt=[],It={mixins:[c["a"]]},Dt=It,Rt=(s("e698"),Object(d["a"])(Dt,At,Wt,!1,null,"d120d3f6",null)),Mt=Rt.exports,Ht={mixins:[c["a"]],components:{EbookReader:o["default"],EbookTitle:f,EbookMenu:vt,EbookBookmark:jt,EbookHeader:zt,EbookFooter:Mt},watch:{offsetY:function(t){!this.menuVisible&&this.bookAvailable&&(t>0?this.move(t):0===t&&this.restore())}},methods:{restore:function(){var t=this;this.$refs.ebook.style.top=0,this.$refs.ebook.style.transition="all .2s linear",setTimeout((function(){t.$refs.ebook.style.transition=""}),200)},move:function(t){this.$refs.ebook.style.top=t+"px"},startLoopReadTime:function(){var t=this,e=Object(g["i"])(this.fileName);e||(e=0),this.task=setInterval((function(){e++,e%30===0&&Object(g["r"])(t.fileName,e)}),1e3)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},Kt=Ht,Yt=(s("ffbf"),Object(d["a"])(Kt,i,n,!1,null,"0c66fd44",null));e["default"]=Yt.exports},5919:function(t,e,s){},6683:function(t,e,s){"use strict";var i=s("2326"),n=s.n(i);n.a},6701:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)},n=[],o=(s("163d"),s("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(o["b"])(this.top)-Object(o["b"])(this.bottom)+"px",this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll))}},mounted:function(){this.refresh()}},r=a,c=(s("9248"),s("4023")),l=Object(c["a"])(r,i,n,!1,null,"55713509",null);e["a"]=l.exports},"70fc":function(t,e,s){},7540:function(t,e,s){},"794d":function(t,e,s){"use strict";var i=s("4a60"),n=s.n(i);n.a},8060:function(t,e,s){"use strict";var i=s("f0e1"),n=s.n(i);n.a},8585:function(t,e,s){"use strict";var i=s("b406"),n=s.n(i);n.a},"88ff":function(t,e,s){},"8f8f":function(t,e,s){"use strict";var i=s("cbc7"),n=s.n(i);n.a},9248:function(t,e,s){"use strict";var i=s("70fc"),n=s.n(i);n.a},"95a4":function(t,e,s){},a2de:function(t,e,s){},a30a:function(t,e,s){"use strict";var i=s("baf1"),n=s.n(i);n.a},b156:function(t,e,s){"use strict";var i=s("7540"),n=s.n(i);n.a},b406:function(t,e,s){},baf1:function(t,e,s){},c353:function(t,e,s){},cbc7:function(t,e,s){},e101:function(t,e,s){},e295:function(t,e,s){"use strict";var i=s("5919"),n=s.n(i);n.a},e698:function(t,e,s){"use strict";var i=s("4b73"),n=s.n(i);n.a},f0e1:function(t,e,s){},fa11:function(t,e,s){},ffbf:function(t,e,s){"use strict";var i=s("a2de"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-74698d19.bbdeaf39.js.map