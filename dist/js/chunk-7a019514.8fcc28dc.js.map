{"version":3,"sources":["webpack:///./node_modules/_core-js@2.6.11@core-js/modules/_is-regexp.js","webpack:///./src/views/store/StoreDetail.vue?df39","webpack:///./src/views/store/StoreDetail.vue?2807","webpack:///./src/views/store/StoreDetail.vue","webpack:///src/views/store/StoreDetail.vue","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/es6.string.starts-with.js","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/_string-context.js","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/es6.regexp.constructor.js","webpack:///./node_modules/_core-js@2.6.11@core-js/modules/_fails-is-regexp.js","webpack:///./src/views/store/StoreDetail.vue?1a01"],"names":["isObject","cof","MATCH","module","exports","it","isRegExp","undefined","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","on","back","onScroll","cover","title","author","desc","_v","_s","$t","publisher","categoryText","lang","isbn","navigation","_e","_l","item","index","key","$event","read","class","deep","style","itemStyle","label","displayed","directives","name","rawName","value","expression","stopPropagation","preventDefault","readBook","trialListening","addOrRemoveShelf","isInShelf","toastText","staticRenderFns","component","console","log","$export","toLength","context","STARTS_WITH","$startsWith","P","F","startsWith","searchString","that","Math","min","arguments","length","search","String","call","slice","defined","NAME","TypeError","global","inheritIfRequired","dP","f","gOPN","$flags","$RegExp","RegExp","Base","proto","prototype","re1","re2","CORRECT_NEW","p","tiRE","piRE","fiU","constructor","source","proxy","configurable","get","set","keys","i","KEY","re","e"],"mappings":"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","file":"js/chunk-7a019514.8fcc28dc.js","sourcesContent":["// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-detail\"},[_c('detail-title',{ref:\"title\",attrs:{\"showShelf\":true},on:{\"back\":_vm.back}}),_c('scroll',{ref:\"scroll\",staticClass:\"content-wrapper\",attrs:{\"top\":42,\"bottom\":52},on:{\"onScroll\":_vm.onScroll}},[_c('book-info',{attrs:{\"cover\":_vm.cover,\"title\":_vm.title,\"author\":_vm.author,\"desc\":_vm.desc}}),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(_vm._s(_vm.$t('detail.copyright')))]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t('detail.publisher')))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.publisher))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t('detail.category')))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.categoryText))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t('detail.lang')))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.lang))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t('detail.ISBN')))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.isbn))])])])]),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(_vm._s(_vm.$t('detail.navigation')))]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.navigation)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t('detail.loading')))])]):_vm._e(),_c('div',{staticClass:\"book-detail-content-item-wrapper\"},_vm._l((_vm.flatNavigation),function(item,index){return _c('div',{key:index,staticClass:\"book-detail-content-item\",on:{\"click\":function($event){return _vm.read(item)}}},[(item.label)?_c('div',{staticClass:\"book-detail-content-navigation-text\",class:{'is-sub': item.deep> 1},style:(_vm.itemStyle(item))},[_vm._v(_vm._s(item.label)+\"\\n            \")]):_vm._e()])}),0)])]),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(_vm._s(_vm.$t('detail.trial')))]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.displayed)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t('detail.loading')))])]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.displayed),expression:\"this.displayed\"}],ref:\"preview\",attrs:{\"id\":\"preview\"}})])],1),_c('div',{staticClass:\"bottom-wrapper\"},[_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.readBook()}}},[_vm._v(_vm._s(_vm.$t('detail.read')))]),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.trialListening()}}},[_vm._v(_vm._s(_vm.$t('detail.listen')))]),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addOrRemoveShelf()}}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isInShelf),expression:\"isInShelf\"}],staticClass:\"icon-check\"}),_vm._v(\"\\n      \"+_vm._s(_vm.isInShelf ? _vm.$t('detail.isAddedToShelf') : _vm.$t('detail.addOrRemoveShelf'))+\"\\n    \")])]),_c('toast',{ref:\"toast\",attrs:{\"text\":_vm.toastText}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoreDetail.vue?vue&type=template&id=19764b5c&scoped=true&\"\nimport script from \"./StoreDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./StoreDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoreDetail.vue?vue&type=style&index=0&id=19764b5c&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19764b5c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"book-detail\">\n    <detail-title @back=\"back\"\n                  :showShelf=\"true\"\n                  ref=\"title\"></detail-title>\n    <scroll class=\"content-wrapper\"\n            :top=\"42\"\n            :bottom=\"52\"\n            @onScroll=\"onScroll\"\n            ref=\"scroll\">\n      <book-info :cover=\"cover\"\n                 :title=\"title\"\n                 :author=\"author\"\n                 :desc=\"desc\"></book-info>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">{{$t('detail.copyright')}}</div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{$t('detail.publisher')}}</div>\n            <div class=\"book-detail-content-text\">{{publisher}}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{$t('detail.category')}}</div>\n            <div class=\"book-detail-content-text\">{{categoryText}}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{$t('detail.lang')}}</div>\n            <div class=\"book-detail-content-text\">{{lang}}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{$t('detail.ISBN')}}</div>\n            <div class=\"book-detail-content-text\">{{isbn}}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">{{$t('detail.navigation')}}</div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.navigation\">\n            <span class=\"loading-text\">{{$t('detail.loading')}}</span>\n          </div>\n          <div class=\"book-detail-content-item-wrapper\">\n            <div class=\"book-detail-content-item\" v-for=\"(item, index) in flatNavigation\" :key=\"index\"\n                 @click=\"read(item)\">\n              <div class=\"book-detail-content-navigation-text\"\n                   :class=\"{'is-sub': item.deep> 1}\"\n                   :style=\"itemStyle(item)\"\n                   v-if=\"item.label\">{{item.label}}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">{{$t('detail.trial')}}</div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.displayed\">\n            <span class=\"loading-text\">{{$t('detail.loading')}}</span>\n          </div>\n        </div>\n        <div id=\"preview\" v-show=\"this.displayed\" ref=\"preview\"></div>\n      </div>\n    </scroll>\n    <div class=\"bottom-wrapper\">\n      <div class=\"bottom-btn\" @click.stop.prevent=\"readBook()\">{{$t('detail.read')}}</div>\n      <div class=\"bottom-btn\" @click.stop.prevent=\"trialListening()\">{{$t('detail.listen')}}</div>\n      <div class=\"bottom-btn\" @click.stop.prevent=\"addOrRemoveShelf()\">\n        <span class=\"icon-check\" v-show=\"isInShelf\"></span>\n        {{isInShelf ? $t('detail.isAddedToShelf') : $t('detail.addOrRemoveShelf')}}\n      </div>\n    </div>\n    <toast :text=\"toastText\" ref=\"toast\"></toast>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import DetailTitle from '../../components/detail/DetaiTitle'\n  import BookInfo from '../../components/detail/BookInfo'\n  import Scroll from '../../components/common/Scroll'\n  import Toast from '../../components/common/Toast'\n  import { detail } from '../../api/store'\n  import { px2rem, realPx } from '../../utils/utils'\n  import Epub from 'epubjs'\n  import { getLocalForage } from '../../utils/localForage'\n  import { addToShelf, removeFromBookShelf } from '../../utils/store'\n  import { getBookShelf, saveBookShelf } from '../../utils/localstorage'\n\n  global.ePub = Epub\n\n  export default {\n    components: {\n      DetailTitle,\n      Scroll,\n      BookInfo,\n      Toast\n    },\n    computed: {\n      desc() {\n        if (this.description) {\n          return this.description.substring(0, 100)\n        } else {\n          return ''\n        }\n      },\n      flatNavigation() {\n        if (this.navigation) {\n          return Array.prototype.concat.apply([], Array.prototype.concat.apply([], this.doFlatNavigation(this.navigation.toc)))\n        } else {\n          return []\n        }\n      },\n      lang() {\n        return this.metadata ? this.metadata.language : '-'\n      },\n      isbn() {\n        return this.metadata ? this.metadata.identifier : '-'\n      },\n      publisher() {\n        return this.metadata ? this.metadata.publisher : '-'\n      },\n      title() {\n        return this.metadata ? this.metadata.title : ''\n      },\n      author() {\n        return this.metadata ? this.metadata.creator : ''\n      }\n    },\n    data() {\n      return {\n        bookItem: null,\n        book: null,\n        metadata: null,\n        trialRead: null,\n        cover: null,\n        navigation: null,\n        displayed: false,\n        audio: null,\n        randomLocation: null,\n        description: null,\n        toastText: '',\n        trialText: null,\n        categoryText: null,\n        opf: null,\n        isInShelf: false\n      }\n    },\n    methods: {\n      inBookShelf() {\n        var bookShelf = getBookShelf()\n        console.log(bookShelf)\n        if (this.bookItem && bookShelf) {\n        console.log('inbook')\n          const flatShelf = (function flatten(arr) {\n            return [].concat(...arr.map(v => v.itemList ? [v, ...flatten(v.itemList)] : v))\n        })(bookShelf).filter(item => item.type === 1)\n          const book = flatShelf.filter(item => item.fileName === this.bookItem.fileName)\n          return book && book.length > 0\n        } else {\n          // console.log('false')\n          return false\n        }\n      },\n      addOrRemoveShelf() {\n        if (this.inBookShelf()) {\n          var newBookShelf = removeFromBookShelf(this.bookItem)\n          saveBookShelf(newBookShelf)\n          console.log('in')\n        } else {\n          addToShelf(this.bookItem)\n          console.log('not')\n        }\n        this.isInShelf = !this.isInShelf\n      },\n      showToast(text) {\n        this.toastText = text\n        this.$refs.toast.show()\n      },\n      readBook() {\n        this.$router.push({\n          path: `/ebook/${this.categoryText}|${this.fileName}`\n        })\n      },\n      trialListening() {\n        getLocalForage(this.bookItem.fileName, (err, blob) => {\n          if (!err && blob && blob instanceof Blob) {\n            this.$router.push({\n              path: '/store/speaking',\n              query: {\n                fileName: this.bookItem.fileName\n              }\n            })\n          } else {\n            this.$router.push({\n              path: '/store/speaking',\n              query: {\n                fileName: this.bookItem.fileName,\n                opf: this.opf\n              }\n            })\n          }\n        })\n      },\n      read(item) {\n        this.$router.push({\n          path: `/ebook/${this.categoryText}|${this.fileName}`\n        })\n      },\n      itemStyle(item) {\n        return {\n          marginLeft: (item.deep - 1) * px2rem(20) + 'rem'\n        }\n      },\n      doFlatNavigation(content, deep = 1) {\n        const arr = []\n        content.forEach(item => {\n          item.deep = deep\n          arr.push(item)\n          if (item.subitems && item.subitems.length > 0) {\n            arr.push(this.doFlatNavigation(item.subitems, deep + 1))\n          }\n        })\n        return arr\n      },\n      downloadBook() {\n        const opf = `${process.env.VUE_APP_EPUB_URL}/${this.bookItem.categoryText}/${this.bookItem.fileName}/OEBPS/package.opf`\n        this.parseBook(opf)\n      },\n      parseBook(url) {\n        this.book = new Epub(url)\n        this.book.loaded.metadata.then(metadata => {\n          this.metadata = metadata\n        })\n        this.book.loaded.navigation.then(nav => {\n          this.navigation = nav\n          if (this.navigation.toc && this.navigation.toc.length > 1) {\n            const candisplay = this.display(this.navigation.toc[1].href)\n            if (candisplay) {\n              candisplay.then(section => {\n                if (this.$refs.scroll) {\n                  this.$refs.scroll.refresh()\n                }\n                this.displayed = true\n                const reg = new RegExp('<.+?>', 'g')\n                const text = section.output.replace(reg, '').replace(/\\s\\s/g, '')\n                this.description = text\n              })\n            }\n          }\n        })\n      },\n      init() {\n        this.fileName = this.$route.query.fileName\n        this.categoryText = this.$route.query.category\n        // async network request, remember\n        if (this.fileName) {\n          detail({\n            fileName: this.fileName\n          }).then(response => {\n            if (response.status === 200 && response.data.error_code === 0 && response.data.data) {\n              const data = response.data.data\n              this.bookItem = data\n              this.cover = this.bookItem.cover\n              let rootFile = data.rootFile\n              if (rootFile.startsWith('/')) {\n                rootFile = rootFile.substring(1, rootFile.length)\n              }\n              this.opf = `${process.env.VUE_APP_EPUB_OPF_URL}/${this.fileName}/${rootFile}`\n              this.parseBook(this.opf)\n            } else {\n              this.showToast(response.data.msg)\n            }\n            this.isInShelf = this.inBookShelf()\n          })\n        }\n      },\n      back() {\n        this.$router.go(-1)\n      },\n      display(location) {\n        if (this.$refs.preview) {\n          if (!this.rendition) {\n            this.rendition = this.book.renderTo('preview', {\n              width: window.innerWidth > 640 ? 640 : window.innerWidth,\n              height: window.innerHeight,\n              method: 'default'\n            })\n          }\n          if (!location) {\n            return this.rendition.display()\n          } else {\n            return this.rendition.display(location)\n          }\n        }\n      },\n      onScroll(offsetY) {\n        if (offsetY > realPx(42)) {\n          this.$refs.title.showShadow()\n        } else {\n          this.$refs.title.hideShadow()\n        }\n      }\n    },\n    mounted() {\n      this.init()\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-detail {\n    width: 100%;\n    background: white;\n    .content-wrapper {\n      width: 100%;\n      .book-detail-content-wrapper {\n        width: 100%;\n        border-bottom: px2rem(1) solid #eee;\n        box-sizing: border-box;\n        .book-detail-content-title {\n          font-size: px2rem(20);\n          font-weight: bold;\n          padding: px2rem(20) px2rem(15) px2rem(10) px2rem(15);\n          box-sizing: border-box;\n        }\n        .book-detail-content-list-wrapper {\n          padding: px2rem(10) px2rem(15);\n          box-sizing: border-box;\n          .loading-text-wrapper {\n            width: 100%;\n            .loading-text {\n              font-size: px2rem(14);\n              color: #666;\n            }\n          }\n          .book-detail-content-row {\n            display: flex;\n            box-sizing: border-box;\n            margin-bottom: px2rem(10);\n            .book-detail-content-label {\n              flex: 0 0 px2rem(70);\n              font-size: px2rem(14);\n              color: #666;\n            }\n            .book-detail-content-text {\n              flex: 1;\n              font-size: px2rem(14);\n              color: #333;\n            }\n          }\n          #preview {\n          }\n          .book-detail-content-item-wrapper {\n            .book-detail-content-item {\n              padding: px2rem(15) 0;\n              font-size: px2rem(14);\n              line-height: px2rem(16);\n              color: #666;\n              border-bottom: px2rem(1) solid #eee;\n              &:last-child {\n                border-bottom: none;\n              }\n              .book-detail-content-navigation-text {\n                width: 100%;\n                @include ellipsis;\n                &.is-sub {\n                  color: #666;\n                }\n              }\n            }\n          }\n        }\n      }\n      .audio-wrapper {\n        width: 100%;\n        padding: px2rem(15);\n        box-sizing: border-box;\n        #audio {\n          width: 100%;\n        }\n      }\n    }\n    .bottom-wrapper {\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      z-index: 120;\n      display: flex;\n      width: 100%;\n      height: px2rem(52);\n      box-shadow: 0 px2rem(-2) px2rem(2) rgba(0, 0, 0, .1);\n      .bottom-btn {\n        flex: 1;\n        color: $color-blue;\n        font-weight: bold;\n        font-size: px2rem(14);\n        @include center;\n        &:active {\n          color: $color-blue-transparent;\n        }\n        .icon-check {\n          margin-right: px2rem(5);\n        }\n      }\n      &.hide-shadow {\n        box-shadow: none;\n      }\n    }\n  }\n</style>\n","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=style&index=0&id=19764b5c&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=style&index=0&id=19764b5c&lang=scss&rel=stylesheet%2Fscss&scoped=true&\""],"sourceRoot":""}